# 系統邏輯分析報告 - 現有專案 vs 需求文件

## 📋 分析日期
2025-08-14

## 🔍 整體架構對比

### ✅ 已實現的功能
1. **基本登入系統** - 已有 username/password 登入
2. **員工管理** - 基本的員工資料管理
3. **營收系統** - 營收記錄和獎金計算
4. **庫存管理** - 公司總庫存管理
5. **打卡系統** - GPS定位打卡
6. **叫貨系統** - 基本叫貨功能
7. **Telegram通知** - 已整合通知系統
8. **手機端支援** - 響應式設計

### ❌ 缺失的重要功能

#### 1. 🔐 **登入系統邏輯不符**
**需求**: 姓名當帳號，身分證當密碼
**現狀**: username/password 系統
**問題**: 完全不符合需求的身分驗證邏輯

#### 2. 👥 **員工註冊功能缺失**
**需求**: 完整的員工自主註冊流程
```
必填欄位: 姓名、身份證、出生日期、性別、持有駕照、聯絡電話、
聯絡地址、緊急聯絡人、關係、緊急聯絡人電話、到職日
自動欄位: 本月所屬分店(預設內壢忠孝店)、職位(預設實習生)、
LINE使用者ID、狀態(審核中/在職/離職)
```
**現狀**: 無自主註冊功能

#### 3. 📦 **庫存同步扣減機制缺失**
**需求**: 員工叫貨自動減少公司庫存，達到安全值通知管理員
**現狀**: 叫貨和庫存沒有連動

#### 4. ⚙️ **系統參數設定功能缺失**
**需求**: 管理員可設定各種系統參數
```
- 分店設定 (座標、人數、營業時間)
- 營收項目設定 (收入/支出項目)
- 照片類別設定
- 通知設定開關
- 排班系統參數
- 投票階級參數
- 備份功能設定
```
**現狀**: 硬編碼，無動態設定

#### 5. 📸 **照片管理系統缺失**
**需求**: 管理員可查看查詢所有照片
**現狀**: 無照片查看功能

#### 6. 📅 **排班系統完全缺失**
**需求**: 複雜的排班規則和時間控制
**現狀**: 無排班功能

#### 7. 🗳️ **升遷投票系統完全缺失**
**需求**: 階級制度和匿名投票機制
**現狀**: 無投票功能

#### 8. 🔧 **維修保養系統缺失**
**需求**: 設備維修申請和狀態追蹤
**現狀**: 無維修管理

#### 9. 📊 **管理員排班功能缺失**
**需求**: 管理員手動安排值班和自動排班
**現狀**: 無管理端排班

## 🚨 **不確定需要確認的部分**

### 1. 🔄 **庫存扣減邏輯**
**問題**: 
- 員工叫貨時，庫存如何自動扣減？
- 是否需要審核機制？
- 庫存不足時是否拒絕叫貨？
- 如何處理退貨補回庫存？

### 2. 📋 **叫貨品項設定**
**需求提到**:
```
類別 品項名稱 廠商 售價 成本 單位 上架狀態 異常叫貨提醒天數 備註
```
**不確定**:
- 這些品項是否就是庫存品項？
- 價格計算邏輯是什麼？
- 異常叫貨提醒的具體邏輯？

### 3. 🖼️ **照片查看功能**
**需求**: "照片也要規劃有可以查看查詢的功能只要給管理員查看查詢照片就好"
**不確定**:
- 查看哪些照片？(營收照片、維修照片、叫貨照片？)
- 查詢條件是什麼？(日期、分店、類別？)
- 是否需要照片分類管理？
- 照片是否需要審核功能？

### 4. 📱 **手機端操作邏輯**
**需求**: "UIUX一律以手機端操作為首要開發目標"
**不確定**:
- 現有桌面版界面是否需要完全重新設計？
- 手機端是否需要獨立的介面？
- 響應式設計是否足夠？

### 5. 🔐 **身分證密碼驗證**
**需求**: "身份證當密碼"
**不確定**:
- 是否需要身分證格式驗證？
- 安全性考量如何處理？
- 是否允許修改身分證？

### 6. ⏰ **排班系統時間控制**
**需求**: "每次排班操作時間5分鐘"
**不確定**:
- 5分鐘後如何強制踢出？
- 未完成排班如何處理？
- 是否需要保存草稿？

### 7. 🏪 **分店參數設定**
**需求文件中的座標和範圍**:
```
"radius": 100000  (內壢店)
"radius": 100     (其他店)
```
**不確定**:
- 內壢店100000公尺範圍是否正確？(100公里)
- 是否為筆誤？

### 8. 💰 **獎金計算邏輯**
**需求**: 複雜的服務費和達標計算
**不確定**:
- 服務費是否從營業額中扣除？
- 多平台訂單如何統計？
- 獎金發放機制是什麼？

## 📋 **需要實現的核心功能清單**

### 🔥 **高優先級 (必須實現)**
1. ✅ **修正登入邏輯** - 改為姓名/身分證
2. ✅ **庫存同步扣減** - 叫貨自動減庫存
3. ✅ **員工註冊流程** - 完整註冊表單
4. ✅ **系統參數設定** - 管理員設定介面
5. ✅ **照片查看功能** - 管理員照片管理

### 🔶 **中優先級 (重要功能)**
6. ⭐ **排班系統** - 複雜排班邏輯
7. ⭐ **升遷投票** - 投票機制
8. ⭐ **維修管理** - 設備維修追蹤
9. ⭐ **管理員排班** - 手動排班工具

### 🔵 **低優先級 (增強功能)**
10. 🎯 **手機端優化** - 介面重新設計
11. 🎯 **進階通知** - 更多通知類型
12. 🎯 **報表功能** - 數據分析
13. 🎯 **備份功能** - 自動備份

## 🎯 **下一步行動計劃**

### 階段1: 核心邏輯修正
1. 修正登入系統使用姓名/身分證
2. 實現庫存同步扣減機制  
3. 新增員工註冊功能
4. 建立系統參數設定

### 階段2: 管理功能擴充
1. 照片查看管理功能
2. 庫存品項設定界面
3. 通知設定管理
4. 基礎排班系統

### 階段3: 進階功能
1. 完整排班系統
2. 升遷投票機制
3. 維修管理系統
4. 管理員排班工具

## ❓ **需要用戶確認的問題**

1. **庫存扣減**: 員工叫貨是否立即扣減庫存？還是需要審核？
2. **照片查看**: 具體需要查看哪些照片？查詢條件是什麼？
3. **手機端**: 現有界面是否需要完全重新設計為手機優先？
4. **分店範圍**: 內壢店的100000公尺範圍是否正確？
5. **安全性**: 身分證當密碼的安全性如何處理？

**請針對這些不確定的部分提供明確指導，我將依此進行系統改進。**